KoreanURLShortener.LinkModel=OBJECT({preset:function(){"use strict";return KoreanURLShortener.MODEL},params:function(){"use strict";var e={url:{notEmpty:!0,size:{max:2e3}},count:{notEmpty:!0,integer:!0}};return{name:"Link",isNotUsingObjectId:!0,initData:{count:0},methodConfig:{create:{valid:VALID(e)},update:!1,remove:!1}}}});KoreanURLShortener.MAIN=METHOD({run:function(){"use strict";var t,e,n,o;DIV({c:[H1({style:{width:150,margin:"auto",marginTop:40,fontWeight:"bold",position:"relative"},c:[IMG({style:{marginLeft:-20,width:150,height:150},src:KoreanURLShortener.R("logo.png")}),DIV({style:{position:"absolute",right:10,bottom:20},c:".한국"})]}),P({style:{marginTop:10,textAlign:"center"},c:"도메인을 짧게 줄여보자."}),FORM({style:{width:300,margin:"auto",marginTop:10},c:[INPUT({style:{width:"100%",height:40,fontSize:20,textAlign:"center"},name:"url",placeholder:"ex) https://github.com/Hanul"}),INPUT({style:{display:"block",width:150,height:40,margin:"auto",marginTop:10,fontWeight:"bold"},type:"submit",value:"▼ 짧 아 져 라! ▼"})],on:{submit:function(n,o){t.empty(),t.append("짧아지는 중..."),t.setHref("http://짧.한국"),KoreanURLShortener.LinkModel.create(o.getData(),{notValid:function(e){void 0!==e.url&&"wrongURL"===e.url.type&&alert("잘못된 URL 입니다!"),t.empty(),t.append("http://짧.한국/하늘"),t.setHref("http://짧.한국/하늘")},success:function(n){t.empty(),t.append("http://짧.한국/"+n.id),t.setHref("http://짧.한국/"+n.id),e.empty(),e.append(A({href:"/__CAPTURE/"+encodeURIComponent(n.url)+".png",target:"_blank",c:IMG({style:{marginTop:20,width:200},src:"/__CAPTURE/"+encodeURIComponent(n.url)+".png"})}))}})}}}),DIV({style:{marginTop:20,textAlign:"center"},c:t=A({style:{fontSize:20,fontWeight:"bold",textShadow:"0 0 150px #EFE4B0, 0 0 60px #EFE4B0, 0 0 10px #EFE4B0"},href:"http://짧.한국/하늘",target:"_blank",c:"http://짧.한국/하늘"})}),e=DIV({style:{textAlign:"center"}}),n=DIV({style:{width:300,margin:"auto",marginTop:40},c:H2({style:{textAlign:"center",fontWeight:"bold",marginBottom:10},c:"최신 URL"})}),o=DIV({style:{width:300,margin:"auto",marginTop:40},c:H2({style:{textAlign:"center",fontWeight:"bold",marginBottom:10},c:"인기 URL"})}),DIV({style:{marginTop:40,textAlign:"center",paddingBottom:40},c:P({c:[A({href:"https://github.com/Hanul/KoreanURLShortener",target:"_blank",c:"짧.한국은 오픈소스 입니다."}),BR(),A({href:"https://www.facebook.com/mr.hanul",target:"_blank",c:"심영재"}),"가 만들었어요.",BR(),"문제가 있을 경우 ",A({href:"https://www.facebook.com/mr.hanul",target:"_blank",c:"제 페이스북"}),"이나 ",A({href:"https://github.com/Hanul/KoreanURLShortener",target:"_blank",c:"GitHub"}),"에 이슈로 남겨주세요 :)"]})})]}).appendTo(BODY),KoreanURLShortener.LinkModel.find({count:5},EACH(function(t){n.append(DIV({style:{marginTop:5},c:[A({style:{flt:"left"},href:"http://짧.한국/"+t.id,target:"_blank",c:"http://짧.한국/"+t.id}),DIV({style:{width:175,marginLeft:10,flt:"right",color:"#999"},c:t.url}),CLEAR_BOTH()]}))})),KoreanURLShortener.LinkModel.find({sort:{count:-1},count:5},EACH(function(t){o.append(DIV({style:{marginTop:5},c:[A({style:{flt:"left"},href:"http://짧.한국/"+t.id,target:"_blank",c:"http://짧.한국/"+t.id}),DIV({style:{width:175,marginLeft:10,flt:"right",color:"#999"},c:t.url}),CLEAR_BOTH()]}))}))}});